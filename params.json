{"name":"Homesick Chef Cookbook","tagline":"Chef library cookbook to manage Homesick castle repositories.","body":"[![Build Status](https://travis-ci.org/fnichol/chef-homesick.png?branch=master)](https://travis-ci.org/fnichol/chef-homesick)\r\n\r\n## <a name=\"description\"></a> Description\r\n\r\nChef library cookbook to manage [Homesick][homesick] castle repositories.\r\n\r\n* Website: http://fnichol.github.io/chef-homesick/\r\n* Opscode Community Site: http://community.opscode.com/cookbooks/homesick\r\n* Source Code: https://github.com/fnichol/chef-homesick\r\n\r\n## <a name=\"usage\"></a> Usage\r\n\r\nSimply include `recipe[homesick]` in your run\\_list and the `homesick_repo`\r\nresource will be available.\r\n\r\nTo use `recipe[homesick::data_bag]`, include it in your run\\_list and have a\r\ndata bag called `\"users\"` with an item for your user like the following:\r\n\r\n    {\r\n      \"id\"  : \"wigglebottom\",\r\n      \"homesick_castles\"  : [\r\n        { \"name\"    : \"dotvim\",\r\n          \"source\"  : \"git://github.com/fnichol/dotvim.git\"\r\n        },\r\n        { \"name\"    : \"dotfiles\",\r\n          \"source\"  : \"git://github.com/fnichol/dotfiles.git\",\r\n          \"action\"  : \"update\"\r\n        }\r\n      ]\r\n    }\r\n\r\nThe data bag recipe will iterate through a list of usernames defined in\r\n`node['users']` and attempt to pull in the homesick information from the data\r\nbag item. In other words, having:\r\n\r\n    node['users'] = ['hsolo']\r\n\r\nwill set up the `hsolo` user's castles and not use the `wigglebottom` user.\r\n\r\n## <a name=\"requirements\"></a> Requirements\r\n\r\n### <a name=\"requirements-chef\"></a> Chef\r\n\r\nTested on 11.4.4 but newer and older version should work just fine.\r\nFile an [issue][issues] if this isn't the case.\r\n\r\n### <a name=\"requirements-platform\"></a> Platform\r\n\r\nThe following platforms have been tested with this cookbook, meaning that the\r\nrecipes run on these platforms without error:\r\n\r\n* ubuntu\r\n* debian\r\n* centos\r\n* scientific\r\n* mac\\_os\\_x\r\n* suse\r\n* openbsd\r\n\r\nPlease [report][issues] any additional platforms so they can be added.\r\n\r\n### <a name=\"requirements-cookbooks\"></a> Cookbooks\r\n\r\nThis cookbook depends on the following external cookbooks:\r\n\r\n* [git][git_cb]\r\n\r\n## <a name=\"installation\"></a> Installation\r\n\r\nDepending on the situation and use case there are several ways to install\r\nthis cookbook. All the methods listed below assume a tagged version release\r\nis the target, but omit the tags to get the head of development. A valid\r\nChef repository structure like the [Opscode repo][chef_repo] is also assumed.\r\n\r\n### <a name=\"installation-site\"></a> From the Opscode Community Site\r\n\r\nTo install this cookbook from the Community Site, use the *knife* command:\r\n\r\n    knife cookbook site install homesick\r\n\r\n### <a name=\"installation-berkshelf\"></a> Using Berkshelf\r\n\r\n[Berkshelf][berkshelf] is a cookbook dependency manager and development\r\nworkflow assistant. To install Berkshelf:\r\n\r\n    cd chef-repo\r\n    gem install berkshelf\r\n    berks init\r\n\r\nTo use the Community Site version:\r\n\r\n    echo \"cookbook 'homesick'\" >> Berksfile\r\n    berks install\r\n\r\nOr to reference the Git version:\r\n\r\n    repo=\"fnichol/chef-homesick\"\r\n    latest_release=$(curl -s https://api.github.com/repos/$repo/git/refs/tags \\\r\n    | ruby -rjson -e '\r\n      j = JSON.parse(STDIN.read);\r\n      puts j.map { |t| t[\"ref\"].split(\"/\").last }.sort.last\r\n    ')\r\n    cat >> Berksfile <<END_OF_BERKSFILE\r\n    cookbook 'homesick',\r\n      :git => 'git://github.com/$repo.git', :branch => '$latest_release'\r\n    END_OF_BERKSFILE\r\n    berks install\r\n\r\n### <a name=\"installation-librarian\"></a> Using Librarian-Chef\r\n\r\n[Librarian-Chef][librarian] is a bundler for your Chef cookbooks.\r\nTo install Librarian-Chef:\r\n\r\n    cd chef-repo\r\n    gem install librarian\r\n    librarian-chef init\r\n\r\nTo use the Community Site version:\r\n\r\n    echo \"cookbook 'homesick'\" >> Cheffile\r\n    librarian-chef install\r\n\r\nOr to reference the Git version:\r\n\r\n    repo=\"fnichol/chef-homesick\"\r\n    latest_release=$(curl -s https://api.github.com/repos/$repo/git/refs/tags \\\r\n    | ruby -rjson -e '\r\n      j = JSON.parse(STDIN.read);\r\n      puts j.map { |t| t[\"ref\"].split(\"/\").last }.sort.last\r\n    ')\r\n    cat >> Cheffile <<END_OF_CHEFFILE\r\n    cookbook 'homesick',\r\n      :git => 'git://github.com/$repo.git', :ref => '$latest_release'\r\n    END_OF_CHEFFILE\r\n    librarian-chef install\r\n\r\n## <a name=\"recipes\"></a> Recipes\r\n\r\n### <a name=\"recipes-default\"></a> default\r\n\r\nThis recipe is a no-op and does nothing.\r\n\r\nUse this recipe when you only want access to the `homesick_castle` LWRP.\r\n\r\n### <a name=\"recipes-data-bag\"></a> data_bag\r\n\r\nFetches an list of homesick castles with data drawn from a data bag. The\r\ndefault data bag is `\"users\"` and the list of user accounts to iterate through\r\nis set on `node['users']`.\r\n\r\nUse this recipe when you want data bag driven data in your workflow.\r\n\r\n## <a name=\"attributes\"></a> Attributes\r\n\r\n### <a name=\"attributes-data-bag-name\"></a> data_bag_name\r\n\r\nThe data bag name containing a group of user account information. This is used\r\nby the `data_bag` recipe to use as a database of user accounts. The default is\r\n`\"users\"`.\r\n\r\n### <a name=\"attributes-user-array-node-attr\"></a> user_array_node_attr\r\n\r\nThe node attributes containing an array of users to be managed. If a nested\r\nhash in the node's attributes is required, then use a `/` between subhashes.\r\nFor example, if the users' array is stored in `node['system']['accounts']`),\r\nthen set `node['homesick']['user_array_node_attr']` to `\"system/accounts\"`.\r\n\r\nThe default is `\"users\"`.\r\n\r\n### <a name=\"attributes-gem-version\"></a> gem_version\r\n\r\nThe version of the Homesick gem to install.\r\n\r\nThe default is `\"~> 0.7.0\"`\r\n(pending [upstream PR #40](https://github.com/technicalpickles/homesick/pull/40)).\r\n\r\n## <a name=\"lwrps\"></a> Resources and Providers\r\n\r\n### <a name=\"lwrps-castle\"></a> homesick_castle\r\n\r\n### <a name=\"lwrps-castle-actions\"></a> Actions\r\n\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th>Action</th>\r\n      <th>Description</th>\r\n      <th>Default</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td>install</td>\r\n      <td>Clones the castle and symlinks it.</td>\r\n      <td>Yes</td>\r\n    </tr>\r\n    <tr>\r\n      <td>update</td>\r\n      <td>Pulls updates for the castle and re-symlinks it.</td>\r\n      <td>&nbsp;</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n### <a name=\"lwrps-castle-attributes\"></a> Attributes\r\n\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th>Attribute</th>\r\n      <th>Description</th>\r\n      <th>Default Value</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td>name</td>\r\n      <td><b>Name attribute:</b> The name of the homesick castle.</td>\r\n      <td><code>nil</code></td>\r\n    </tr>\r\n    <tr>\r\n      <td>user</td>\r\n      <td>The user using the castle.</td>\r\n      <td><code>nil</code></td>\r\n    </tr>\r\n    <tr>\r\n      <td>source</td>\r\n      <td>The clone URL (http, https, git, etc.) of the castle.</td>\r\n      <td><code>nil</code></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n#### <a name=\"lwrps-castle-examples\"></a> Examples\r\n\r\n##### Install a Castle\r\n\r\n    homesick_castle 'dotvim' do\r\n      user    'wigglebottom\r\n      source  'git://github.com/fnichol/dotvim.git'\r\n    end\r\n\r\n**Note:** the install action is the default.\r\n\r\n##### Pull Updates for a Castle\r\n\r\n    homesick_castle 'dotfiles' do\r\n      user    'wigglebottom\r\n      source  'git://github.com/fnichol/dotfiles.git'\r\n      action  :update\r\n    end\r\n\r\n## <a name=\"development\"></a> Development\r\n\r\n* Source hosted at [GitHub][repo]\r\n* Report issues/Questions/Feature requests on [GitHub Issues][issues]\r\n\r\nPull requests are very welcome! Make sure your patches are well tested.\r\nIdeally create a topic branch for every separate change you make.\r\n\r\n## <a name=\"license\"></a> License and Author\r\n\r\nAuthor:: [Fletcher Nichol][fnichol] (<fnichol@nichol.ca>) [![endorse](http://api.coderwall.com/fnichol/endorsecount.png)](http://coderwall.com/fnichol)\r\n\r\nCopyright 2011, Fletcher Nichol\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n\r\n[berkshelf]:    http://berkshelf.com/\r\n[chef_repo]:    https://github.com/opscode/chef-repo\r\n[cheffile]:     https://github.com/applicationsonline/librarian/blob/master/lib/librarian/chef/templates/Cheffile\r\n[git_cb]:       http://community.opscode.com/cookbooks/git\r\n[homesick]:     https://github.com/technicalpickles/homesick\r\n[librarian]:    https://github.com/applicationsonline/librarian#readme\r\n\r\n[fnichol]:      https://github.com/fnichol\r\n[repo]:         https://github.com/fnichol/chef-homesick\r\n[issues]:       https://github.com/fnichol/chef-homesick/issues\r\n","google":"UA-29670723-1","note":"Don't delete this file! It's used internally to help with page regeneration."}